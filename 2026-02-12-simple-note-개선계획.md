# simple-note ê°œì„  ì‘ì—… ê³„íš

**ì‘ì„±ì¼:** 2026-02-12  
**ëŒ€ìƒ:** [[simple-note]] ë ˆí¬ì§€í† ë¦¬  
**ëª©í‘œ:** í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ ë³´ì•ˆ ë° UX ê°œì„   

---

## ğŸ“Š ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

```
ê¸´ê¸‰ë„ â†‘
    â”‚
    â”‚  Phase 1 (Critical)
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”‚ ë³´ì•ˆ ê°œì„  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚       Phase 2 (Major)
    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       â”‚ ì‹ ë¢°ì„±/UX ê°œì„ â”‚
    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚            Phase 3 (Minor)
    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚ DX/í’ˆì§ˆ ê°œì„  â”‚
    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ì¤‘ìš”ë„
```

---

## Phase 1: ë³´ì•ˆ ë° ì¸ì¦ (Critical) ğŸ”´

### 1-1. Supabase ì¸ì¦ ì‹œìŠ¤í…œ ë„ì…

- [ ] **Supabase Auth ì„¤ì •**
  - [ ] `auth.users` í…Œì´ë¸” ì—°ë™
  - [ ] ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ ì„¤ì •
  - [ ] ì†Œì…œ ë¡œê·¸ì¸ ì¶”ê°€ (ì„ íƒ: Google, GitHub)

- [ ] **RLS ì •ì±… ì—…ë°ì´íŠ¸**
  ```sql
  -- ê¸°ì¡´: using (true)
  -- ë³€ê²½: auth.uid() = user_id
  ```
  - [ ] `001_create_notes_table.sql` ìˆ˜ì •: `user_id` ì»¬ëŸ¼ ì¶”ê°€
  - [ ] `002_create_rls_policies.sql` ìˆ˜ì •: ì¸ì¦ ê¸°ë°˜ ì •ì±… ì ìš©
  - [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ì¬ì ìš©

- [ ] **í´ì´ì–¸íŠ¸ í‚¤ ë…¸ì¶œ ë¬¸ì œ í•´ê²°**
  - [ ] ì„œë²„ ì•¡ì…˜ íŒŒì¼ ìƒì„±: `app/notes/actions.ts`
  - [ ] í´ë¼ì´ì–¸íŠ¸ Supabase í˜¸ì¶œ â†’ ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ ì „í™˜
  - [ ] í™˜ê²½ ë³€ìˆ˜ ì •ë¦¬: ì„œë²„ ì „ìš© í‚¤ ë¶„ë¦¬

### 1-2. ì¸ì¦ UI êµ¬í˜„

- [ ] **ë¡œê·¸ì¸/íšŒì›ê°€ì… í˜ì´ì§€**
  - [ ] `/login` í˜ì´ì§€ ìƒì„±
  - [ ] `/signup` í˜ì´ì§€ ìƒì„±
  - [ ] ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ìœ í‹¸ë¦¬í‹°

- [ ] **ì¸ì¦ ìƒíƒœ ê´€ë¦¬**
  - [ ] Supabase Auth Context ìƒì„±
  - [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ (Header)
  - [ ] ë³´í˜¸ëœ ë¼ìš°íŠ¸ middleware ì„¤ì •

---

## Phase 2: ì‹ ë¢°ì„± ë° UX ê°œì„  (Major) ğŸŸ 

### 2-1. íƒ€ì… ì•ˆì „ì„± ê°•í™”

- [ ] **Zod ìŠ¤í‚¤ë§ˆ ì •ì˜**
  - [ ] `schemas/note.ts` ìƒì„±
    ```typescript
    export const NoteSchema = z.object({
      id: z.string().uuid(),
      title: z.string().min(1).max(200),
      content: z.string().max(10000),
      created_at: z.string().datetime(),
      updated_at: z.string().datetime(),
    })
    ```
  - [ ] `schemas/form.ts` ìƒì„± (í¼ ê²€ì¦ìš©)
  - [ ] ëª¨ë“  `as Note` ìºìŠ¤íŒ… ì œê±° â†’ `parse()` ì ìš©

- [ ] **Supabase íƒ€ì… ìƒì„±**
  - [ ] `supabase gen types` ì‹¤í–‰
  - [ ] ìƒì„±ëœ íƒ€ì… ì ìš©

### 2-2. ì—ëŸ¬ í•¸ë“¤ë§ ê°œì„ 

- [ ] **ì—ëŸ¬ í´ë˜ìŠ¤ ì •ì˜**
  - [ ] `lib/errors.ts` ìƒì„±
    - `NoteError` (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
    - `AuthError` (ì¸ì¦ ê´€ë ¨)
    - `ValidationError` (ê²€ì¦ ì‹¤íŒ¨)

- [ ] **ì—ëŸ¬ ë°”ìšë¦¬ êµ¬í˜„**
  - [ ] `components/ErrorBoundary.tsx` ìƒì„±
  - [ ] `app/error.tsx` (ë£¨íŠ¸ ì—ëŸ¬ í˜ì´ì§€)
  - [ ] `app/notes/error.tsx` (ë…¸íŠ¸ ì˜ì—­ ì—ëŸ¬)

- [ ] **Toast/Notification ì‹œìŠ¤í…œ**
  - [ ] Toast ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜ (Sonner ë˜ëŠ” react-hot-toast)
  - [ ] ì „ì—­ Toast Provider ì„¤ì •
  - [ ] ëª¨ë“  `alert()` â†’ `toast()`ë¡œ êµì²´

### 2-3. ë°ì´í„° í˜ì¹­ ìµœì í™”

- [ ] **SWR ë˜ëŠ” React Query ë„ì…**
  - [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜: `swr` ë˜ëŠ” `@tanstack/react-query`
  - [ ] Query Provider ì„¤ì •
  - [ ] `useNotes`, `useNote` ì»¤ìŠ¤í…€ í›… ìƒì„±
  - [ ] ë‚™ê´€ì  ì—…ë°ì´íŠ¸ êµ¬í˜„

- [ ] **ë¡œë”© ìƒíƒœ ê°œì„ **
  - [ ] `app/notes/loading.tsx` ìƒì„±
  - [ ] `app/notes/[id]/edit/loading.tsx` ìƒì„±
  - [ ] Skeleton UI ì»´í¬ë„ŒíŠ¸

- [ ] **Streaming í™œìš©**
  - [ ] Suspense ë°”ìšë¦¬ ì ìš©
  - [ ] ì ì§„ì  ë¡œë”© êµ¬í˜„

### 2-4. í¼ ê²€ì¦ ê°•í™”

- [ ] **Zod ìŠ¤í‚¤ë§ˆ ì ìš©**
  ```typescript
  export const CreateNoteSchema = z.object({
    title: z.string()
      .min(1, 'ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
      .max(200, 'ì œëª©ì€ 200ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”'),
    content: z.string()
      .min(1, 'ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
      .max(10000, 'ë‚´ìš©ì€ 10000ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”'),
  })
  ```

- [ ] **ì‹¤ì‹œê°„ ê²€ì¦**
  - [ ] ì…ë ¥ ì¤‘ ìœ íš¨ì„± ê²€ì‚¬
  - [ ] ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
  - [ ] ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” ë¡œì§ ê°œì„ 

---

## Phase 3: DX ë° í’ˆì§ˆ ê°œì„  (Minor) ğŸŸ¡

### 3-1. SEO ë° ë©”íƒ€ë°ì´í„°

- [ ] **ë™ì  ë©”íƒ€ë°ì´í„°**
  - [ ] `app/notes/page.tsx`: generateMetadata
  - [ ] `app/notes/[id]/edit/page.tsx`: ë™ì  title
  - [ ] Open Graph ì´ë¯¸ì§€ ì„¤ì •

- [ ] **sitemap.xml ìƒì„±**
  - [ ] ë™ì  sitemap ë¼ìš°íŠ¸

### 3-2. ì ‘ê·¼ì„± ê°œì„ 

- [ ] **ARIA ì†ì„± ì¶”ê°€**
  - [ ] `aria-label` ì¶”ê°€
  - [ ] `role` ì†ì„± ì •ì˜
  - [ ] í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›

- [ ] **ë§í¬ ì»´í¬ë„ŒíŠ¸ êµì²´**
  - [ ] `layout.tsx`ì˜ `<a>` â†’ `<Link>`ë¡œ ë³€ê²½
  - [ ] prefetch ì„¤ì • ê²€í† 

### 3-3. ì½”ë“œ í’ˆì§ˆ

- [ ] **ESLint ê·œì¹™ ê°•í™”**
  - [ ] `@typescript-eslint/no-explicit-any` ê¸ˆì§€
  - [ ] `no-console` (production)
  - [ ] import/order ê·œì¹™

- [ ] **Prettier ì„¤ì •**
  - [ ] `.prettierrc` ìƒì„±
  - [ ] import ì •ë ¬ í”ŒëŸ¬ê·¸ì¸

- [ ] **Husky + lint-staged**
  - [ ] pre-commit í›… ì„¤ì •
  - [ ] ì»¤ë°‹ ì „ ìë™ ê²€ì¦

### 3-4. ì˜ì¡´ì„± ê´€ë¦¬

- [ ] **íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸**
  - [ ] `pnpm outdated` ì‹¤í–‰
  - [ ] ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬: `pnpm audit`
  - [ ] ì—…ë°ì´íŠ¸ ë° í…ŒìŠ¤íŠ¸

---

## Phase 4: í…ŒìŠ¤íŠ¸ ê°•í™” (ì„ íƒ) ğŸ”µ

### 4-1. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ëŒ€

- [ ] **í†µí•© í…ŒìŠ¤íŠ¸**
  - [ ] í˜ì´ì§€ ë Œë”ë§ í…ŒìŠ¤íŠ¸
  - [ ] ì‚¬ìš©ì í”Œë¡œìš° í…ŒìŠ¤íŠ¸

- [ ] **E2E í…ŒìŠ¤íŠ¸**
  - [ ] Playwright ì„¤ì¹˜
  - [ ] CRUD ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

- [ ] **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸**
  - [ ] `vitest --coverage` ì„¤ì •
  - [ ] ëª©í‘œ: 80% ì´ìƒ

---

## ğŸ“… ì˜ˆìƒ ì¼ì •

| Phase | ì˜ˆìƒ ê¸°ê°„ | ì£¼ìš” ì‚°ì¶œë¬¼ |
|-------|----------|------------|
| Phase 1 | 2-3ì¼ | ì¸ì¦ ì‹œìŠ¤í…œ, RLS ì •ì±… |
| Phase 2 | 3-5ì¼ | íƒ€ì… ì•ˆì •ì„±, ì—ëŸ¬ í•¸ë“¤ë§, SWR |
| Phase 3 | 2-3ì¼ | SEO, ì ‘ê·¼ì„±, ì½”ë“œ í’ˆì§ˆ |
| Phase 4 | 2-3ì¼ | í…ŒìŠ¤íŠ¸ ê°•í™” |
| **ì´í•©** | **9-14ì¼** | í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ |

---

## âœ… ì§„í–‰ ìƒí™©

### Phase 1 - âœ… ì™„ë£Œ (2026-02-12)
- [x] ë¸Œëœì¹˜ ìƒì„±: `feat/phase1-security-auth`
- [x] Zod íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [x] ìŠ¤í‚¤ë§ˆ ì •ì˜ (`schemas/note.ts`)
- [x] ì„œë²„ ì•¡ì…˜ ìƒì„± (`app/notes/actions.ts`)
- [x] ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶”ê°€ (003, 004)
- [x] ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ (Toast ì ìš©)
- [x] GitHub í‘¸ì‹œ ì™„ë£Œ
- [x] **PR #1 ë¨¸ì§€ ì™„ë£Œ** âœ…

**ë‚¨ì€ ì‘ì—…:**
- [ ] Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© (Dashboardì—ì„œ SQL ì‹¤í–‰)
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env.local)

---

### ğŸ” ë¡œê·¸ì¸ êµ¬í˜„ ë°©ë²•

í˜„ì¬ëŠ” **ì„œë²„ ì•¡ì…˜ì— ì„ì‹œ user_id**ê°€ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì‹¤ì œ ì¸ì¦ì„ êµ¬í˜„í•˜ë ¤ë©´:

**ì˜µì…˜ 1: Email/Password (ê°€ì¥ ì¼ë°˜ì )**
- `/login`, `/signup` í˜ì´ì§€ ìƒì„±
- Supabase Auth `signInWithPassword`, `signUp` ì‚¬ìš©
- Session ê´€ë¦¬ (Middleware)

**ì˜µì…˜ 2: Magic Link (ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸ ë§í¬)**
- ì´ë©”ì¼ë§Œ ì…ë ¥í•˜ë©´ ë¡œê·¸ì¸ ë§í¬ ë°œì†¡
- ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ê°„í¸ ë¡œê·¸ì¸

**ì˜µì…˜ 3: OAuth (Google, GitHub ë“±)**
- ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼
- ê°€ì¥ ì‚¬ìš©ì ì¹œí™”ì 

---

### Phase 2
1. Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (003, 004)
2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env.local)
3. í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •
4. PR ìƒì„± ë° ë¨¸ì§€

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì¤€ë¹„ì‚¬í•­
```bash
# ë¸Œëœì¹˜ ìƒì„±
git checkout -b feat/security-improvements

# Phase 1 íŒ¨í‚¤ì§€ ì„¤ì¹˜
pnpm add zod sonner
pnpm add -D @types/uuid
```

### ì²« ë²ˆì§¸ ì‘ì—… ìˆœì„œ
1. â­ Supabase Auth ì„¤ì •
2. â­ `user_id` ì»¬ëŸ¼ ì¶”ê°€ ë§ˆì´ê·¸ë ˆì´ì…˜
3. â­ RLS ì •ì±… ì—…ë°ì´íŠ¸
4. â­ ì„œë²„ ì•¡ì…˜ ìƒì„±
5. â­ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

---

## ğŸ“ ì°¸ê³  ìë£Œ

- [[2026-02-12-simple-note-ì½”ë“œë¦¬ë·°|ì½”ë“œ ë¦¬ë·° ì›ë¬¸]]
- [Supabase Auth Docs](https://supabase.com/docs/guides/auth)
- [Next.js Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions)
- [Zod Documentation](https://zod.dev/)
- [SWR Documentation](https://swr.vercel.app/)

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸ ìš”ì•½

### ğŸ”´ Phase 1 (í•„ìˆ˜)
- [ ] Supabase Auth ì„¤ì •
- [ ] RLS ì •ì±… ìˆ˜ì •
- [ ] ì„œë²„ ì•¡ì…˜ ë„ì…
- [ ] ë¡œê·¸ì¸/íšŒì›ê°€ì… UI

### ğŸŸ  Phase 2 (ê¶Œì¥)
- [ ] Zod ìŠ¤í‚¤ë§ˆ
- [ ] ì—ëŸ¬ ë°”ìšë¦¬
- [ ] Toast ì‹œìŠ¤í…œ
- [ ] SWR ë„ì…
- [ ] ë¡œë”© UI

### ğŸŸ¡ Phase 3 (ì„ íƒ)
- [ ] ë©”íƒ€ë°ì´í„°
- [ ] ì ‘ê·¼ì„±
- [ ] ì½”ë“œ í’ˆì§ˆ

### ğŸ”µ Phase 4 (ì¶”í›„)
- [ ] E2E í…ŒìŠ¤íŠ¸
- [ ] ì»¤ë²„ë¦¬ì§€ 80%
